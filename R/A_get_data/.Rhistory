library(tabulizer)
pdfs <- list.files("../../Data/pdf", full.names = T)
pdfs
tabs <- extract_tables(pdfs)
tabs
library(tidyverse)
# Plot the pyramid!
pop %>%
mutate(
pop = ifelse(sex=="Female", pop*(-1), pop*1)
, frac = ifelse(sex=="Female", frac*(-1), frac*1)
, share = paste0(abs(round(frac*100,1)), "%")
) %>%
ggplot(aes(x=age, y = pop, label = share)) +
geom_col(aes(fill=sex)) +
geom_text(aes(label = share),
position = position_nudge(y = nudge_fun(pop)),
size = 4
) +
coord_flip() +
# Colours from plotting
scale_fill_manual("", values = c("#990099", "#009900")) +
scale_y_continuous(
"", breaks = scales::pretty_breaks(n = 6),
# Small function to rescale y axis
labels =  function(br) ifelse(abs(br)>=1000,paste0(abs(br)/1000, "k"), abs(br))
) +
labs(x = "", y = "Age group") +
theme_bw() +
theme(
legend.position = 'bottom'
,axis.title.x=element_blank()
)
